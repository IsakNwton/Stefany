<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para Stefany</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        /* Estilos personalizados para complementar Tailwind */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #1a1a2e;
            color: #e0e0e0;
            overflow: hidden; /* Evita el scroll para mantener el efecto de fondo */
        }

        #particle-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        main {
            position: relative;
            z-index: 1;
        }

        .text-glow {
            text-shadow: 0 0 8px rgba(236, 72, 153, 0.6), 0 0 20px rgba(236, 72, 153, 0.4);
        }

        @property --angle {
          syntax: '<angle>';
          initial-value: 0deg;
          inherits: false;
        }

        .glowing-card {
            --border-size: 3px;
            --angle: 0deg;
            
            border: var(--border-size) solid transparent;
            border-radius: 1.5rem;
            
            background-image: 
                linear-gradient(to right, #1a1a2e, #1a1a2e),
                conic-gradient(from var(--angle), #d946ef, #ec4899, #8b5cf6, #d946ef);
            
            background-size: 100% 100%;
            background-position: center center;
            background-clip: padding-box, border-box;
            background-origin: padding-box, border-box;
            
            animation: rotate-angle 4s linear infinite;
            transition: padding 0.7s cubic-bezier(0.45, 0, 0.55, 1);
            position: relative; /* Necesario para posicionar el bot√≥n de regreso */
        }
        
        .glowing-card.is-shrunken {
            padding-top: 3rem;
            padding-bottom: 3rem;
        }
        
        #intro-paragraph {
            transition: max-height 0.7s cubic-bezier(0.45, 0, 0.55, 1), margin 0.7s cubic-bezier(0.45, 0, 0.55, 1), opacity 0.5s ease-out;
            max-height: 200px;
            overflow: hidden;
        }

        .action-button {
            transition: width 0.5s ease, padding 0.5s ease, opacity 0.5s ease, margin 0.5s ease;
            overflow: hidden;
            white-space: nowrap;
        }
        
        #button-container {
            transition: max-height 0.5s ease, opacity 0.3s ease;
        }

        #back-button {
            transition: opacity 0.5s ease 0.2s, transform 0.5s ease 0.2s;
        }

        .message, #secret-code-section, #writings-section {
            transition: opacity 0.4s ease, max-height 0.5s ease;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
        }
        .message.is-visible, #secret-code-section.is-visible, #writings-section.is-visible {
            max-height: 500px; /* Aumentado para dar espacio a los textos */
            opacity: 1;
        }
        
        @keyframes rotate-angle {
            to { --angle: 360deg; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
        
        #cursor-glow {
            position: fixed;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(236, 72, 153, 0.3);
            filter: blur(20px);
            pointer-events: none;
            transform: translate(-50%, -50%);
            transition: transform 0.1s ease-out;
            z-index: 9999;
        }

        .gradient-ball {
            background: conic-gradient(from var(--angle), #d946ef, #ec4899, #8b5cf6, #d946ef);
            animation: rotate-angle 4s linear infinite;
        }

        #secret-input-wrapper {
            position: relative;
            border-radius: 0.75rem;
            padding: 2px; /* Grosor del borde */
            background: rgba(255, 255, 255, 0.2); /* Borde "apagado" */
            transition: background 0.4s;
        }
        #secret-input-wrapper.is-focused {
            background: conic-gradient(from var(--angle), #d946ef, #ec4899, #8b5cf6, #d946ef);
            animation: rotate-angle 4s linear infinite;
        }
        #secret-input-wrapper.success {
            background: #22c55e;
            animation: none; /* Detener animaci√≥n en √©xito */
        }
        #secret-input-wrapper.error {
            background: #ef4444; /* Borde rojo en error */
            animation: shake 0.82s cubic-bezier(.36,.07,.19,.97) both;
        }

        #secret-code-input {
            background-color: #1a1a2e; /* Color de fondo interior */
            border: none;
            outline: none;
            width: 100%;
            border-radius: 0.6rem; /* Radio interior */
        }

        #writing-display {
            transition: opacity 0.5s ease;
            max-height: 300px; 
            overflow-y: auto;
            padding-right: 1rem; 
        }

        #writing-display::-webkit-scrollbar {
            width: 8px;
        }

        #writing-display::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        #writing-display::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, #d946ef, #ec4899, #8b5cf6);
            border-radius: 10px;
        }

        #writing-display::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(45deg, #e857ff, #ff5baf, #9c6eff);
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <canvas id="particle-canvas"></canvas>
    <div id="cursor-glow"></div>

    <main class="text-center w-full max-w-4xl mx-auto">
        
        <div id="glowing-card" class="glowing-card p-8 sm:p-12 md:p-16">
            
            <a href="#" id="back-button" class="gradient-ball absolute top-6 left-6 w-10 h-10 rounded-full flex items-center justify-center opacity-0 pointer-events-none transform hover:scale-110 -translate-x-20">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="white" viewBox="0 0 256 256" class="relative z-10"><path d="M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"></path></svg>
            </a>

            <div class="animate-float">
                <h1 class="text-5xl md:text-7xl font-bold text-white text-glow mb-4">
                    Stefany
                </h1>
            </div>

            <p id="intro-paragraph" class="text-lg md:text-xl text-gray-300 max-w-2xl mx-auto mt-6 mb-10">
                Un espacio creado solo para ti. Exclusivamente para ti. Espero que te guste ;)
            </p>

            <div id="button-container" class="flex flex-col sm:flex-row items-center justify-center gap-4">
                <a href="#" id="gallery-button" class="action-button w-full sm:w-auto bg-pink-500/80 hover:bg-pink-500 text-white font-semibold py-3 px-8 rounded-full shadow-lg shadow-pink-500/30 hover:shadow-pink-500/50 transform hover:scale-105">
                    Tu Galer√≠a
                </a>
                <a href="#" id="writings-button" class="action-button w-full sm:w-auto bg-cyan-500/80 hover:bg-cyan-500 text-white font-semibold py-3 px-8 rounded-full shadow-lg shadow-cyan-500/30 hover:shadow-cyan-500/50 transform hover:scale-105">
                    Escritos
                </a>
                <a href="#" id="phrase-button" class="action-button w-full sm:w-auto bg-purple-500/80 hover:bg-purple-500 text-white font-semibold py-3 px-8 rounded-full shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 transform hover:scale-105">
                    <3
                </a>
                <a href="#" id="lock-button" class="action-button w-full sm:w-auto bg-gray-600/80 hover:bg-gray-500 text-white font-semibold p-3 rounded-full shadow-lg shadow-gray-500/30 hover:shadow-gray-500/50 transform hover:scale-105">
                    üîê
                </a>
            </div>
            
            <p id="special-phrase" class="message text-pink-300 text-xl mt-8"></p>
            <p id="gallery-message" class="message text-cyan-300 text-lg mt-8 leading-relaxed"></p>
            
            <div id="writings-section" class="w-full text-left mt-8">
                <div id="writings-buttons" class="flex flex-col items-center gap-4 w-full">
                    <!-- Los botones de los escritos se generar√°n aqu√≠ con JS -->
                </div>
                <div id="writing-display" class="hidden opacity-0">
                    <h3 id="writing-title" class="text-2xl font-bold text-pink-300 mb-4 text-center"></h3>
                    <p id="writing-content" class="text-gray-300 leading-relaxed whitespace-pre-wrap"></p>
                </div>
            </div>

            <div id="secret-code-section" class="mt-4">
                <div class="flex items-center justify-center gap-2">
                    <div id="secret-input-wrapper" class="w-full max-w-xs mx-auto">
                        <input type="text" id="secret-code-input" placeholder="Introduce un c√≥digo" class="text-center w-full p-2 rounded-lg text-white">
                    </div>
                    <a href="#" id="submit-code-button" class="gradient-ball w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center transform hover:scale-110">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="white" viewBox="0 0 256 256"><path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm45.66,85.66-48,48a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,140.69l42.34-42.35a8,8,0,0,1,11.32,11.32Z"></path></svg>
                    </a>
                </div>
            </div>

        </div>

    </main>

    <script>
        // Script para el efecto de brillo del cursor
        const cursorGlow = document.getElementById('cursor-glow');
        document.addEventListener('mousemove', (e) => {
            requestAnimationFrame(() => {
                cursorGlow.style.left = `${e.clientX}px`;
                cursorGlow.style.top = `${e.clientY}px`;
            });
        });

        // Script para el efecto de part√≠culas y constelaciones
        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        let particlesArray;
        const mouse = { x: null, y: null };
        window.addEventListener('mousemove', (event) => {
            mouse.x = event.x;
            mouse.y = event.y;
        });
        window.addEventListener('mouseout', () => {
            mouse.x = null;
            mouse.y = null;
        });
        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 2.5 + 1;
                this.speedX = (Math.random() * 0.6) - 0.3;
                this.speedY = (Math.random() * 0.6) - 0.3;
                this.color = 'rgba(236, 72, 153, 0.5)';
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                if (this.x < 0 || this.x > canvas.width || this.y < 0 || this.y > canvas.height) {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                }
            }
            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        function init() {
            particlesArray = [];
            let numberOfParticles = (canvas.height * canvas.width) / 12000;
            for (let i = 0; i < numberOfParticles; i++) {
                particlesArray.push(new Particle());
            }
        }
        function connect() {
            let opacityValue = 1;
            for (let a = 0; a < particlesArray.length; a++) {
                for (let b = a; b < particlesArray.length; b++) {
                    let distance = ((particlesArray[a].x - particlesArray[b].x) * (particlesArray[a].x - particlesArray[b].x))
                                 + ((particlesArray[a].y - particlesArray[b].y) * (particlesArray[a].y - particlesArray[b].y));
                    
                    if (distance < (canvas.width/7) * (canvas.height/7)) {
                        opacityValue = 1 - (distance/20000);
                        ctx.strokeStyle = `rgba(107, 213, 255, ${opacityValue})`;
                        ctx.lineWidth = 1;
                        ctx.beginPath();
                        ctx.moveTo(particlesArray[a].x, particlesArray[a].y);
                        ctx.lineTo(particlesArray[b].x, particlesArray[b].y);
                        ctx.stroke();
                    }
                }
            }
        }
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let i = 0; i < particlesArray.length; i++) {
                particlesArray[i].update();
                particlesArray[i].draw();
            }
            connect();
            requestAnimationFrame(animate);
        }
        init();
        animate();
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            init();
        });

        // --- L√ìGICA DE SONIDO ---
        // Carga los archivos de sonido. Deben estar en la misma carpeta que este archivo HTML.
        const popSound = new Audio('pop.wav');
        const notificationSound = new Audio('notification.wav');

        /**
         * Reproduce un elemento de audio desde el principio.
         * @param {HTMLAudioElement} audioElement El elemento de audio a reproducir.
         */
        function playSound(audioElement) {
            // Reinicia el sonido al inicio para que pueda reproducirse varias veces
            audioElement.currentTime = 0; 
            audioElement.play().catch(e => console.error("Error al reproducir el sonido:", e));
        }

        // --- L√ìGICA DE LA INTERFAZ ---

        // Elementos del DOM
        const glowingCard = document.getElementById('glowing-card');
        const phraseButton = document.getElementById('phrase-button');
        const galleryButton = document.getElementById('gallery-button');
        const writingsButton = document.getElementById('writings-button');
        const lockButton = document.getElementById('lock-button');
        const backButton = document.getElementById('back-button');
        const phraseElement = document.getElementById('special-phrase');
        const galleryMessage = document.getElementById('gallery-message');
        const secretCodeSection = document.getElementById('secret-code-section');
        const secretInputWrapper = document.getElementById('secret-input-wrapper');
        const secretCodeInput = document.getElementById('secret-code-input');
        const submitCodeButton = document.getElementById('submit-code-button');
        const buttonContainer = document.getElementById('button-container');
        const introParagraph = document.getElementById('intro-paragraph');
        const writingsSection = document.getElementById('writings-section');
        const writingsButtons = document.getElementById('writings-buttons');
        const writingDisplay = document.getElementById('writing-display');
        const writingTitle = document.getElementById('writing-title');
        const writingContent = document.getElementById('writing-content');

        // Contenido
        const phrases = [
            "Eres demasiado bonita, no dejes que nadie te haga creer lo contrario.",
            "No importa lo que pase, siempre ser√°s especial para alguien.",
            "Tu luz ilumina los rincones m√°s oscuros del mundo.",
            "Eres un sue√±o del que nadie querr√≠a despertar.",
            "Tu existencia es la poes√≠a m√°s bonita jam√°s escrita. Significa esperanza.",
            "No importa cu√°ntas veces te lo diga, siempre ser√° poco: eres incre√≠ble.",
            "Cada parte de ti es bella, desde tus sue√±os hasta tus imperfecciones.",
            "Eres la raz√≥n por la que creo que existen buenas mujeres.",
            "S√© que no estoy a la altura, pero lo que importa es que eres especial.",
            "No es la primera ni la √∫ltima vez que te lo digo, pero eres una persona maravillosa.",
        ];

        const writingsData = {
            '¬øSabes?': {
                title: "¬øSabes?",
                content: `Stefany, a veces me pregunto si realmente sabes cu√°nto te quiero. No por insistencia, ni por ser dram√°tico, sino por algo real y bonito, algo que me naci√≥ sin que yo lo buscara. Quise demostrarlo, y quiz√°s en el intento me equivoqu√©. Tal vez habl√© demasiado, o esper√© algo que no deb√≠a. Pero ahora lo entiendo: no todo sentimiento necesita ser correspondido para ser sincero o para ser real. Si en alg√∫n momento hice que te sintieras inc√≥moda, confundida o bajo presi√≥n, lo siento profundamente. No era mi intenci√≥n. Solo quise mostrarte lo que ve√≠a en ti: una persona especial. \n\nNo me arrepiento de haber sido honesto, porque guardarme lo que siento tambi√©n habr√≠a sido una falta de respeto hacia ti, hacia lo que generaste en m√≠. Pero reconozco que quiz√°s no era el momento correcto, ni la forma m√°s sabia. Quiero que sepas que, pase lo que pase, siempre voy a desearte lo mejor, aunque eso signifique seguir caminos distintos. \n\nGracias por existir en mi historia.`,
                locked: true,
                code: 'pregunto'
            },
            'gracias': {
                title: "Gracias",
                content: `Quiero agradecerte. Porque gracias a ti descubr√≠ una parte de m√≠ que no conoc√≠a: una parte de m√≠ que se atreve a sentir con todo el coraz√≥n. \n\nNunca hab√≠a hecho algo as√≠ por nadie. T√∫ fuiste la raz√≥n por la que di ese paso. No fue porque esperara algo a cambio. Lo hice porque lo sent√≠. Porque me nac√≠a. Y eso, para m√≠, ya es suficiente. \n\nSolo quiero que sepas que aqu√≠ estoy, que puedes confiar, que puedes hablar, que tambi√©n mereces ser escuchada y cuidada. No tienes que sentir lo mismo que yo, no es una obligaci√≥n. Lo √∫nico que deseo es que no pierdas la fe en lo bonito, en el amor sincero y en las personas buenas. \n\nNo importa si tu coraz√≥n no late en la misma frecuencia que el m√≠o. Lo que importa es que lo que yo sent√≠ fue real, limpio y valiente. Y si eso sirve para demostrarte que a√∫n existen personas que quieren querer bien, entonces todo vali√≥ la pena. \n\nGracias por cada palabra, por cada momento, por dejarme sentir esto. Gracias por ser t√∫.`,
                locked: true,
                code: 'gracias'
            },
            'me-gustas': {
                title: "Me gustas",
                content: `Me gustas much√≠simo. \n\nNo eres dif√≠cil de conquistar, eres dif√≠cil de merecer y eso es much√≠simo mejor. Te atrae alguien por sus cualidades, pero amas a alguien con todos sus defectos. \n\nEl amor aut√©ntico florece cuando nos mostramos tal como somos, sin m√°scaras ni pretensiones. El amor es seguro, es sincero. Para m√≠, si tienes que jugar juegos para que te quieran, entonces eso no es amor.\n\nY te escribo esto no para ganarme tu atenci√≥n, ni para hacerte sentir obligada. Te lo escribo porque esto es lo que soy, y no me interesa disfrazarlo. No vine a impresionarte con palabras vac√≠as. Vine a decirte que existe un tipo de amor que no necesita respuesta para seguir siendo real. \n\nUn amor que no exige nada‚Ä¶ pero que a√∫n as√≠ quiere darte todo. No vine a cambiarte ni a convencerte. No espero que un d√≠a despiertes y me mires como yo te miro. Porque el amor, el de verdad, no es una trampa emocional, es una elecci√≥n libre. \n\nY yo te elijo as√≠. Tal como eres. Con tus dudas, tus silencios, tus enojos, tus risas raras, tus momentos fr√≠os, tus gestos tiernos. Con todo eso que te hace t√∫. No s√© si soy ese ‚Äúalguien especial‚Äù que t√∫ est√°s esperando. \n\nPero t√∫ s√≠ fuiste esa persona para m√≠. Me ayudaste a ver cosas que no sab√≠a que sent√≠a. A escribir cosas que no sab√≠a que ten√≠a dentro. Y eso no lo olvido. No se borra. No se reemplaza. \n\nY si alg√∫n d√≠a te sientes sola o perdida‚Ä¶ si dudas de ti o sientes que el mundo no te entiende‚Ä¶ quiero que recuerdes esto: Hubo alguien que te quiso con el coraz√≥n. Que te vio completa, rota y perfecta al mismo tiempo. Que te eligi√≥ sin intentar cambiarte. \n\nY que, aunque no le elegiste, decidi√≥ dejarte flores en la puerta del coraz√≥n.`,
                locked: true,
                code: 'valor'
            },
            'flores-secretas': {
                title: "FLORES",
                content: `¬øTe gustan las flores?... Espero que s√≠. A mi me gustan, me parecen hermosas (como t√∫). \n\nPero no por su olor, no por su forma, sino por lo que representan, lo que significan. \n\nPara m√≠ significan vida, no hablan, no piensan, no sienten, pero‚Ä¶ viven. Hay humanos que hablan, ‚Äúpiensan‚Äù, sienten, y no viven. \n\n¬øPara t√≠ qu√© significan?... Para m√≠ la vida en su m√°xima expresi√≥n: Se estima que existen m√°s de 270,000 especies diferentes de flores en el mundo. Cada rosa, planta y flor es √∫nica individualmente, irrepetible, como todos nosotros. \n\nHay demasiadas, diferentes formas, olores, colores, prop√≥sitos‚Ä¶ Todo me recuerda a la vida, la vida misma, con sus altibajos, momentos buenos, momentos malos. \n\nPero son momentos, y merecen ser atendidos. La flor m√°s antigua que se conoce, tiene 125 millones de a√±os. Te regalo esas flores porque me pareces especial (y siempre lo ser√°s). Lo hago de coraz√≥n, porque es lo quise, porque me sali√≥ del coraz√≥n hacerlo sin esperar nada a cambio. Porque muchas personas no reciben flores hasta el d√≠a de su muerte, posadas en una l√°pida. \n\nEs triste que la gente solo te diga lo mucho que te quer√≠a, que les importabas, que te admiraban ya que es muy tarde. Yo no quiero cometer ese error. As√≠ que perd√≥n si llegu√© a causar incomodidad, pero creo que mereces eso y mucho m√°s..`,
                locked: true,
                code: 'flores'
            }
        };

        // Variables de estado
        let currentPhraseIndex = -1;
        let animationState = 'initial'; // 'initial', 'phrases', 'gallery', 'secret', 'writings'

        // --- Agregar el evento de clic de sonido a todos los botones principales ---
        const allButtons = document.querySelectorAll('a.action-button, a#back-button, a#submit-code-button');
        allButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                // No reproducir sonido si el bot√≥n est√° desactivado
                if (!e.currentTarget.classList.contains('pointer-events-none')) {
                    playSound(popSound);
                }
            });
        });
        
        // Funciones de la interfaz
        function showMessage(element, text) {
            document.querySelectorAll('.message').forEach(msg => msg.classList.remove('is-visible'));
            writingsSection.classList.remove('is-visible');
            setTimeout(() => {
                if(text) element.innerHTML = text;
                element.classList.add('is-visible');
            }, 300);
        }

        function shrinkCard() {
            if (animationState === 'initial') {
                glowingCard.classList.add('is-shrunken');
                introParagraph.style.maxHeight = '0';
                introParagraph.style.marginTop = '0';
                introParagraph.style.marginBottom = '0';
                introParagraph.classList.add('opacity-0');
                backButton.classList.remove('opacity-0', 'pointer-events-none', '-translate-x-20');
            }
        }

        function handleSectionClick(state, element, text) {
            if (animationState !== 'initial') return;
            
            shrinkCard();
            animationState = state;
            
            buttonContainer.style.maxHeight = '0';
            buttonContainer.style.opacity = '0';
            buttonContainer.classList.add('pointer-events-none');

            if (element) {
                if(text) element.innerHTML = text;
                element.classList.add('is-visible');
            }
        }

        // Event Listeners para los botones principales
        phraseButton.addEventListener('click', (e) => {
            e.preventDefault();

            // Si la secci√≥n <3 no est√° activa, haz la animaci√≥n solo una vez
            if (animationState !== 'phrases') {
                shrinkCard();
                animationState = 'phrases';
                ['gallery-button', 'writings-button', 'lock-button'].forEach(id => {
                    const btn = document.getElementById(id);
                    btn.style.width = '0';
                    btn.style.paddingLeft = '0';
                    btn.style.paddingRight = '0';
                    btn.style.margin = '0';
                    btn.style.opacity = '0';
                });
                buttonContainer.style.justifyContent = 'center';
            }

            // Siempre muestra una frase diferente
            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * phrases.length);
            } while (phrases.length > 1 && randomIndex === currentPhraseIndex);
            currentPhraseIndex = randomIndex;
            showMessage(phraseElement, phrases[currentPhraseIndex]);
        });
        phraseButton.addEventListener('click', (e) => {
            e.preventDefault();

            // Si la secci√≥n <3 no est√° activa, haz la animaci√≥n solo una vez
            if (animationState !== 'phrases') {
                shrinkCard();
                animationState = 'phrases';
                ['gallery-button', 'writings-button', 'lock-button'].forEach(id => {
                    const btn = document.getElementById(id);
                    btn.style.width = '0';
                    btn.style.paddingLeft = '0';
                    btn.style.paddingRight = '0';
                    btn.style.margin = '0';
                    btn.style.opacity = '0';
                });
                buttonContainer.style.justifyContent = 'center';
            }

            // Siempre muestra una frase diferente
            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * phrases.length);
            } while (phrases.length > 1 && randomIndex === currentPhraseIndex);
            currentPhraseIndex = randomIndex;
            showMessage(phraseElement, phrases[currentPhraseIndex]);
        });

        
        galleryButton.addEventListener('click', (e) => {
            e.preventDefault();
            const text = "Uyyy, lo siento. No puedo poner fotos tuyas si no las tengo.üòâ<br>PD: Conforme pase el tiempo ir√© agregando nuevas cosas ;)";
            handleSectionClick('gallery', galleryMessage, text);
        });
        
        lockButton.addEventListener('click', (e) => {
            e.preventDefault();
            handleSectionClick('secret');
            secretCodeSection.classList.add('is-visible');
        });

        writingsButton.addEventListener('click', (e) => {
            e.preventDefault();
            handleSectionClick('writings', writingsSection);

            writingsButtons.innerHTML = '';
            let unlockedCount = 0;
            for (const key in writingsData) {
                if (!writingsData[key].locked) { // Solo mostrar si no est√° bloqueado
                    unlockedCount++;
                    const button = document.createElement('a');
                    button.href = '#';
                    button.textContent = writingsData[key].title;
                    button.dataset.key = key;
                    button.className = 'w-full max-w-sm bg-purple-500/80 hover:bg-purple-500 text-white font-semibold py-3 px-6 rounded-full shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 transform hover:scale-105 transition-all duration-300';
                    writingsButtons.appendChild(button);
                }
            }

            if (unlockedCount === 0) {
                const p = document.createElement('p');
                p.textContent = 'A√∫n no has desbloqueado ning√∫n escrito. ¬°Usa los c√≥digos secretos!';
                p.className = 'text-center text-gray-400';
                writingsButtons.appendChild(p);
            }

            writingDisplay.classList.add('hidden');
            writingDisplay.classList.remove('opacity-0');
            writingsButtons.classList.remove('hidden');
        });

        writingsButtons.addEventListener('click', (e) => {
            e.preventDefault();
            if (e.target.tagName === 'A') {
                const key = e.target.dataset.key;
                const writing = writingsData[key];

                if (writing) {
                    writingTitle.textContent = writing.title;
                    writingContent.textContent = writing.content;

                    writingsButtons.classList.add('hidden');
                    writingDisplay.classList.remove('hidden');
                    setTimeout(() => writingDisplay.classList.add('opacity-100'), 50);
                }
            }
        });

        secretCodeInput.addEventListener('focus', () => {
            if (!secretInputWrapper.classList.contains('success')) {
                secretInputWrapper.classList.add('is-focused');
            }
        });
        secretCodeInput.addEventListener('blur', () => {
            secretInputWrapper.classList.remove('is-focused');
        });

        submitCodeButton.addEventListener('click', (e) => {
            e.preventDefault();
            secretInputWrapper.classList.remove('error', 'success', 'is-focused');
            const enteredCode = secretCodeInput.value.toLowerCase();
            let codeFound = false;

            for (const key in writingsData) {
                if (writingsData[key].code === enteredCode) {
                    writingsData[key].locked = false; // Desbloquear el escrito
                    codeFound = true;
                    break; // Salir del bucle una vez encontrado
                }
            }

            if (codeFound) {
                secretInputWrapper.classList.add('success');
                playSound(notificationSound); // Reproducir sonido de notificaci√≥n
                setTimeout(() => {
                    backButton.click();
                }, 500);
            } else {
                secretInputWrapper.classList.add('error');
                setTimeout(() => {
                    secretInputWrapper.classList.remove('error');
                }, 820);
            }
        });

        backButton.addEventListener('click', (e) => {
            e.preventDefault();
            if (animationState === 'initial') return;

            if (animationState === 'writings' && !writingDisplay.classList.contains('hidden')) {
                writingDisplay.classList.remove('opacity-100');
                setTimeout(() => {
                    writingDisplay.classList.add('hidden');
                    writingsButtons.classList.remove('hidden');
                }, 400);
                return; 
            }

            glowingCard.classList.remove('is-shrunken');
            backButton.classList.add('opacity-0', 'pointer-events-none', '-translate-x-20');
            document.querySelectorAll('.message').forEach(msg => msg.classList.remove('is-visible'));
            secretCodeSection.classList.remove('is-visible');
            writingsSection.classList.remove('is-visible');
            secretCodeInput.value = '';
            secretInputWrapper.classList.remove('error', 'success', 'is-focused');

            introParagraph.style.maxHeight = '';
            introParagraph.style.marginTop = '';
            introParagraph.style.marginBottom = '';
            introParagraph.classList.remove('opacity-0');

            buttonContainer.style.maxHeight = '';
            buttonContainer.style.opacity = '';
            buttonContainer.classList.remove('pointer-events-none');
            buttonContainer.style.justifyContent = '';

            document.querySelectorAll('.action-button').forEach(btn => {
                btn.style.width = '';
                btn.style.paddingLeft = '';
                btn.style.paddingRight = '';
                btn.style.margin = '';
                btn.style.opacity = '';
            });
            
            animationState = 'initial';
        });
    </script>

</body>
</html>
